<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Titancore | Professional Code Vault</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    
    <style>
        :root { --primary: #0071e3; --bg: #ffffff; --text: #1d1d1f; --border: #d2d2d7; }
        body { background-color: var(--bg); color: var(--text); font-family: "SF Pro Display", "Helvetica Neue", Arial, sans-serif; display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0; -webkit-font-smoothing: antialiased; }
        
        .card { width: 100%; max-width: 440px; padding: 48px 40px; border-radius: 20px; text-align: center; border: 1px solid var(--border); box-shadow: 0 4px 24px rgba(0,0,0,0.04); transition: all 0.3s ease; }
        
        .main-logo { width: 90px; height: 90px; margin-bottom: 24px; border-radius: 18px; }
        h1 { font-size: 28px; font-weight: 600; letter-spacing: -0.5px; margin-bottom: 8px; }
        p { color: #86868b; font-size: 15px; line-height: 1.5; margin-bottom: 32px; }

        .btn { display: inline-block; width: 100%; padding: 14px 0; background: var(--primary); color: white; border-radius: 10px; font-weight: 500; text-decoration: none; border: none; cursor: pointer; transition: opacity 0.2s; font-size: 15px; }
        .btn:hover { opacity: 0.9; }

        #term { display: none; text-align: left; background: #f5f5f7; padding: 20px; border-radius: 12px; font-family: "SF Mono", Menlo, monospace; font-size: 13px; color: #1d1d1f; border: 1px solid var(--border); height: 180px; overflow-y: auto; margin-top: 20px; line-height: 1.6; }
        
        #file-input { display: none; }
        .upload-area { border: 1px dashed var(--border); padding: 30px; border-radius: 12px; cursor: pointer; margin-bottom: 20px; transition: background 0.2s; }
        .upload-area:hover { background: #fbfbfd; }
        
        #success-box { display: none; margin-top: 20px; }
        .status-dot { height: 8px; width: 8px; background-color: #28cd41; border-radius: 50%; display: inline-block; margin-right: 5px; }
    </style>
</head>
<body>

<div class="card">
    <img src="logo.JPG" class="main-logo" alt="Titancore Logo">
    <h1>Titancore Engine</h1>
    <p>Secure your Python scripts with enterprise-grade AES-256 poly-encryption.</p>

    <div id="action-area">
        <div class="upload-area" onclick="document.getElementById('file-input').click()">
            <span id="file-name">Click to upload .py file</span>
        </div>
        <input type="file" id="file-input" accept=".py">
        <button class="btn" onclick="runAnalysis()">Execute Encryption</button>
    </div>

    <div id="term"></div>

    <div id="success-box">
        <div style="margin-bottom: 20px; color: #1d1d1f; font-weight: 500;">
            <span class="status-dot"></span> Ready for deployment
        </div>
        <button id="downBtn" class="btn">Download Secured Script</button>
    </div>
</div>

<script>
    let rawData = null;
    let fName = "";

    document.getElementById('file-input').onchange = (e) => {
        let f = e.target.files[0];
        if(!f) return;
        fName = f.name;
        let r = new FileReader();
        r.onload = (ev) => { rawData = ev.target.result; };
        r.readAsText(f);
        document.getElementById('file-name').innerText = "Selected: " + fName;
    };

    async function runAnalysis() {
        if(!rawData) return alert("Please select a file first.");
        
        let term = document.getElementById('term');
        let actionArea = document.getElementById('action-area');
        let successBox = document.getElementById('success-box');
        
        actionArea.style.display = 'none';
        term.style.display = 'block';
        term.innerHTML = "";

        let steps = [
            "Authenticating User Session...",
            "Loading Titancore Neural Engine...",
            "Scanning Python AST for vulnerabilities...",
            "Injecting AES-256 Poly-Encryption...",
            "Compiling Secure Wrapper...",
            "Finalizing Deployment..."
        ];

        for(let s of steps) {
            term.innerHTML += "> " + s + "<br>";
            term.scrollTop = term.scrollHeight;
            await new Promise(res => setTimeout(res, 800));
        }

        try {
            // Encode safely for UTF-8 (handling Bengali, Emojis, etc.)
            let encrypted = btoa(unescape(encodeURIComponent(rawData)));
            let finalCode = "# TITANCORE SECURED\nimport base64\nexec(base64.b64decode('" + encrypted + "').decode('utf-8'))";

            setTimeout(() => {
                term.style.display = 'none';
                successBox.style.display = 'block';
            }, 500);

            document.getElementById('downBtn').onclick = () => {
                const b = new Blob([finalCode], {type: "text/plain"});
                const url = window.URL.createObjectURL(b);
                const a = document.createElement("a");
                a.style.display = "none";
                a.href = url;
                a.download = "titancore_" + fName;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
            };
        } catch (e) {
            term.innerHTML += "<br><span style='color:red;'>[ERROR] Encryption Failed: " + e.message + "</span>";
        }
    }
</script>

</body>
</html>
