<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <title>Chess.in Pro - Ultimate Edition</title>
    <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
    <style>
        body {
            background-color: #262421;
            color: #ffffff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }

        .game-container {
            display: flex;
            gap: 20px;
            background: #312e2b;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        #myBoard {
            width: 450px;
        }

        .side-panel {
            width: 250px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .status-box {
            background: #21201d;
            padding: 15px;
            border-radius: 5px;
            border-left: 5px solid #7fa650;
        }

        .status-text {
            font-size: 1.2rem;
            color: #7fa650;
            font-weight: bold;
        }

        .move-history {
            height: 200px;
            overflow-y: auto;
            background: #2b2925;
            padding: 10px;
            margin-top: 10px;
            font-size: 14px;
            color: #bababa;
        }

        button {
            background-color: #7fa650;
            color: white;
            border: none;
            padding: 12px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
        }

        button:hover { background-color: #95bb4a; }

        /* Chess.com Style Highlight */
        .highlight-white { background-color: rgba(255, 255, 0, 0.5) !important; }
        .highlight-black { background-color: rgba(255, 255, 0, 0.5) !important; }
    </style>
</head>
<body>

    <h2 style="margin-bottom: 10px;">CHESS.IN <span style="color:#7fa650">ULTIMATE</span></h2>

    <div class="game-container">
        <div id="myBoard"></div>

        <div class="side-panel">
            <div class="status-box">
                <div class="status-text" id="status">সাদার চাল</div>
                <div id="check-alert" style="color: #ff4444; font-weight: bold;"></div>
            </div>

            <div class="move-history" id="move-history">
                <strong>চাল সমুহ:</strong><br>
                <div id="pgn"></div>
            </div>

            <button onclick="resetGame()">নতুন গেম শুরু করো</button>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>

    <script>
        var board = null;
        var game = new Chess();
        var $status = $('#status');
        var $pgn = $('#pgn');
        var $checkAlert = $('#check-alert');

        // সাউন্ড ফাইল (Chess.com অরিজিনাল সাউন্ড)
        var moveSound = new Audio('https://images.chesscomfiles.com/chess-themes/sounds/_standard_/default/move-self.mp3');
        var captureSound = new Audio('https://images.chesscomfiles.com/chess-themes/sounds/_standard_/default/capture.mp3');

        function onDragStart (source, piece, position, orientation) {
            if (game.game_over()) return false;
            if ((game.turn() === 'w' && piece.search(/^b/) !== -1) ||
                (game.turn() === 'b' && piece.search(/^w/) !== -1)) {
                return false;
            }
        }

        function onDrop (source, target) {
            var move = game.move({
                from: source,
                to: target,
                promotion: 'q' 
            });

            if (move === null) return 'snapback';

            // সাউন্ড লজিক
            if (move.captured) captureSound.play();
            else moveSound.play();

            updateStatus();
        }

        function onSnapEnd () {
            board.position(game.fen());
        }

        function updateStatus () {
            var status = '';
            var moveColor = (game.turn() === 'w') ? 'সাদা' : 'কালো';

            if (game.in_checkmate()) {
                status = 'গেম শেষ! ' + moveColor + ' চেকমেট হয়েছে।';
            } else if (game.in_draw()) {
                status = 'ড্র হয়েছে!';
            } else {
                status = moveColor + 'র চাল';
                if (game.in_check()) {
                    $checkAlert.html('⚠️ চেক পড়েছে!');
                } else {
                    $checkAlert.html('');
                }
            }

            $status.html(status);
            $pgn.html(game.pgn());
        }

        function resetGame() {
            game.reset();
            board.start();
            $pgn.html('');
            updateStatus();
        }

        var config = {
            draggable: true,
            position: 'start',
            onDragStart: onDragStart,
            onDrop: onDrop,
            onSnapEnd: onSnapEnd
        };
        board = Chessboard('myBoard', config);
        updateStatus();
    </script>
</body>
</html>
